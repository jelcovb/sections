<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="style.css">

        <title>Document</title>
    </head>
    <body>
        <div class="bouncy_container">
            <div class="bouncy_image">
                <img src="images/temp1.jpg" alt="temp foto" class="bouncy-image" />
            </div>
            <div class="bouncy_title-container">
                <h3>Springkasteel X</h3>
                <p>Dit springkasteel is voor te springen!</p>
                <button class="bouncy_more">meer info</button>
            </div>

            <div class="bouncy_overlay-info hidden">
                <div class="carousel-slider">
                    <button class="close-overlay">&times;</button>
                    <button class="prev">&lsaquo;</button>
                    <button class="next">&rsaquo;</button>
                    <div class="carousel-collection">
                        <img src="https://source.unsplash.com/featured/500x300" alt="testing" class="carousel-numero" />
                        <img src="https://source.unsplash.com/featured/400x300" alt="testing 2" class="carousel-numero hidden" />
                        <img src="https://source.unsplash.com/featured/300x300" alt="testing 3" class="carousel-numero hidden" />
                    </div>
                </div>
                <div class="bouncy-product-info">
                    <h3>Title</h3>
                    <p>Price:</p>
                    <div>
                        <ul>
                            <li>width</li>
                            <li>height</li>
                            <li>depth</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="overlay hidden"></div>
        </div>

        <script>
            const mainImage = document.querySelector('.bouncy-image');
            const overlayBox = document.querySelector('.bouncy_overlay-info');
            const btnCloseOverlay = document.querySelector('.close-overlay');
            const overlay = document.querySelector('.overlay');
            const prev = document.querySelector('.prev');
            const next = document.querySelector('.next');
            const carouselItems = document.querySelectorAll('.carousel-numero');
            var position = 0;

            const checkPosition = function () {
                carouselItems.forEach((element, index) => {
                    if (!element.classList.contains('hidden')) {
                        position = index;
                    }
                });
            };

            const openModal = function () {
                overlayBox.classList.remove('hidden');
                overlay.classList.remove('hidden');
            };

            const closeModal = function () {
                overlayBox.classList.add('hidden');
                overlay.classList.add('hidden');
            };

            mainImage.addEventListener('click', function () {
                openModal();
            });

            btnCloseOverlay.addEventListener('click', function () {
                closeModal();
            });

            overlay.addEventListener('click', function () {
                closeModal();
            });

            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && !overlayBox.classList.contains('hidden')) {
                    closeModal();
                }
            });

            next.addEventListener('click', function () {
                checkPosition();
                carouselItems[position].classList.add('hidden');

                if (position + 1 >= carouselItems.length) {
                    carouselItems[0].classList.remove('hidden');
                } else {
                    carouselItems[position + 1].classList.remove('hidden');
                }
            });

            prev.addEventListener('click', function () {
                checkPosition();
                carouselItems[position].classList.add('hidden');

                if (position === 0) {
                    carouselItems[carouselItems.length - 1].classList.remove('hidden');
                } else {
                    carouselItems[position - 1].classList.remove('hidden');
                }
            });
        </script>
    </body>
</html>
